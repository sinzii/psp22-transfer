"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.instance = void 0;
const assert_js_1 = require("../common/assert.js");
const mod_js_1 = require("../common/mod.js");
function instance(ctor, $args, toArgs) {
    return (0, mod_js_1.createShape)({
        metadata: (0, mod_js_1.metadata)("$.instance", instance, ctor, $args, toArgs),
        staticSize: $args.staticSize,
        subEncode(buffer, value) {
            $args.subEncode(buffer, toArgs(value));
        },
        subDecode(buffer) {
            return new ctor(...$args.subDecode(buffer));
        },
        subAssert(assert) {
            assert.instanceof(this, ctor);
            $args.subAssert(new assert_js_1.AssertState(toArgs(assert.value), "#arguments", assert));
        },
    });
}
exports.instance = instance;
//# sourceMappingURL=instance.js.map