/**
 * Create a chain of proxy objects
 *
 * @param carrier
 * @param currentLevel
 * @param maxLevel
 */
export const newProxyChain = (carrier, currentLevel = 1, maxLevel = 3) => {
    const { executor, chain = [] } = carrier;
    if (currentLevel === maxLevel) {
        return executor.execute(...chain);
    }
    return new Proxy(carrier, {
        get(target, property, receiver) {
            if (!target.chain) {
                target.chain = [];
            }
            const { chain } = target;
            chain.push(property.toString());
            return newProxyChain(target, currentLevel + 1, maxLevel);
        },
    });
};
