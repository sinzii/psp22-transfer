import { assert } from '@dedot/utils';
import { JsonRpcGroup } from './JsonRpcGroup.js';
export class Transaction extends JsonRpcGroup {
    constructor(client, options) {
        super(client, { prefix: 'transaction', supportedVersions: ['unstable', 'v1'], ...options });
    }
    async broadcastTx(tx) {
        const operationId = await this.broadcast(tx);
        return () => {
            return this.stop(operationId);
        };
    }
    async broadcast(tx) {
        const operationId = await this.send('broadcast', tx);
        assert(operationId, 'Maximum number of broadcasted transactions has been reached');
        return operationId;
    }
    stop(operationId) {
        return this.send('stop', operationId);
    }
}
