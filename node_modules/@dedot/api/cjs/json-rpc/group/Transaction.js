"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Transaction = void 0;
const utils_1 = require("@dedot/utils");
const JsonRpcGroup_js_1 = require("./JsonRpcGroup.js");
class Transaction extends JsonRpcGroup_js_1.JsonRpcGroup {
    constructor(client, options) {
        super(client, { prefix: 'transaction', supportedVersions: ['unstable', 'v1'], ...options });
    }
    async broadcastTx(tx) {
        const operationId = await this.broadcast(tx);
        return () => {
            return this.stop(operationId);
        };
    }
    async broadcast(tx) {
        const operationId = await this.send('broadcast', tx);
        (0, utils_1.assert)(operationId, 'Maximum number of broadcasted transactions has been reached');
        return operationId;
    }
    stop(operationId) {
        return this.send('stop', operationId);
    }
}
exports.Transaction = Transaction;
