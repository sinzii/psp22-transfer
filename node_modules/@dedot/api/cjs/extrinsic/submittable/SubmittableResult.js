"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubmittableResult = void 0;
class SubmittableResult {
    status;
    events;
    dispatchInfo;
    dispatchError;
    txHash;
    txIndex;
    constructor({ events, status, txHash, txIndex }) {
        this.events = events || [];
        this.status = status;
        this.txHash = txHash;
        this.txIndex = txIndex;
        [this.dispatchInfo, this.dispatchError] = this._extractDispatchInfo();
    }
    _extractDispatchInfo() {
        for (const { event } of this.events) {
            const { pallet, palletEvent } = event;
            if (pallet === 'System' && palletEvent.name === 'ExtrinsicFailed') {
                const { dispatchInfo, dispatchError } = palletEvent.data;
                return [dispatchInfo, dispatchError];
            }
            else if (pallet === 'System' && palletEvent.name === 'ExtrinsicSuccess') {
                const { dispatchInfo } = palletEvent.data;
                return [dispatchInfo, undefined];
            }
        }
        return [undefined, undefined];
    }
}
exports.SubmittableResult = SubmittableResult;
