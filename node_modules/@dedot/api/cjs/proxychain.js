"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.newProxyChain = void 0;
/**
 * Create a chain of proxy objects
 *
 * @param carrier
 * @param currentLevel
 * @param maxLevel
 */
const newProxyChain = (carrier, currentLevel = 1, maxLevel = 3) => {
    const { executor, chain = [] } = carrier;
    if (currentLevel === maxLevel) {
        return executor.execute(...chain);
    }
    return new Proxy(carrier, {
        get(target, property, receiver) {
            if (!target.chain) {
                target.chain = [];
            }
            const { chain } = target;
            chain.push(property.toString());
            return (0, exports.newProxyChain)(target, currentLevel + 1, maxLevel);
        },
    });
};
exports.newProxyChain = newProxyChain;
